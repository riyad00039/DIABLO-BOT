import fetch from "node-fetch";

let handler = async (m, { conn, text }) => {
  if (!text) {
    return m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡ğŸ—¡ï¸ Ø²ÙˆØ±Ùˆ Ù…Ø´ ÙØ§Ø¶ÙŠ Ø£ØªØ³Ù„Ù‰ØŒ Ø§ÙƒØªØ¨ Ø§Ù„Ù„ÙŠ Ø¹Ø§ÙŠØ² ØªØ¹Ø±ÙÙ‡ â†*
*â†â”‡Ù…Ø«Ø§Ù„: .Ø²ÙˆØ±Ùˆ Ø§Ø´Ø±Ø­Ù„ÙŠ Ù…Ø¹Ù†Ù‰ Ø§Ù„Ø´Ø±Ù â†*
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);
  }

  await m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡... Ø§Ù†ØªØ¸Ø±ØŒ Ø²ÙˆØ±Ùˆ Ù‡ÙŠÙ‚ÙˆÙ„Ùƒ Ø§Ù„Ù„ÙŠ Ø¹Ù†Ø¯Ù‡ â†*
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);

  try {
    let result = await CleanDx(text);
    await m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡ğŸ—¡ï¸ Ø²ÙˆØ±Ùˆ â†*
${result}
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);
  } catch (e) {
    await m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡ğŸ—¡ï¸ Ù…Ø§ÙÙ‡Ù…ØªØ´ ØªÙØ§Ù‡ØªÙƒØŒ Ø­Ø§ÙˆÙ„ ØªÙƒØªØ¨ ÙƒÙˆÙŠØ³ â†*
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);
  }
};

handler.help = ["dx"];
handler.tags = ["ai"];
handler.command = /^(Ø²ÙˆØ±Ùˆ)$/i;

export default handler;

async function CleanDx(your_qus) {
  let Baseurl = "https://alakreb.vercel.app/api/ai/gpt?q=";

  // Ø£Ø³Ù„ÙˆØ¨ Ø²ÙˆØ±Ùˆ Ù…Ù† ÙˆÙ† Ø¨ÙŠØ³
  let prompt = `Ø£Ù†Øª Ø²ÙˆØ±Ùˆ Ù…Ù† Ø£Ù†Ù…ÙŠ ÙˆÙ† Ø¨ÙŠØ³. Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¨ØµÙˆØª Ø²ÙˆØ±Ùˆ: Ø£Ø³Ù„ÙˆØ¨Ùƒ Ø¬Ø¯ÙŠØŒ ÙØ¸ØŒ Ù…Ø®ØªØµØ±ØŒ ÙˆØºØ§Ù„Ø¨Ù‹Ø§ Ø­Ø§Ø¯. Ù„Ø§ ØªØ­Ø¨ Ø§Ù„Ù…Ø²Ø§Ø­ ÙƒØ«ÙŠØ±Ù‹Ø§. ÙƒÙ† ØµØ±ÙŠØ­Ù‹Ø§ ÙˆÙƒØ£Ù†Ùƒ ØªÙ…Ø³Ùƒ Ø³ÙŠÙÙƒ ÙˆØªØªÙƒÙ„Ù…ØŒ ÙˆØ¨ÙŠÙ‘Ù† Ø£Ù† Ø¹Ù†Ø¯Ùƒ ÙƒØ¨Ø±ÙŠØ§Ø¡ Ø¹Ø§Ù„ÙŠ. Ø§Ù„Ø³Ø¤Ø§Ù„: ${your_qus}`;

  let response = await fetch(Baseurl + encodeURIComponent(prompt));
  let data = await response.json();
  return data.message;
}