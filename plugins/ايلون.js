import fetch from "node-fetch";

let handler = async (m, { conn, text }) => {
  if (!text) {
    return m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡ğŸš€ Ù‡Ù„ ØªØªÙˆÙ‚Ø¹ Ø¥Ù†ÙŠ Ù…Ø®ØªØ±Ø¹ Neuralink ÙˆØ£Ù‚Ø±Ø£ Ø£ÙÙƒØ§Ø±ÙƒØŸ Ø§ÙƒØªØ¨ Ø´ÙŠØ¦Ù‹Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø£Ù…Ø± â†*
*â†â”‡Ù…Ø«Ø§Ù„: .Ø§ÙŠÙ„ÙˆÙ† Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠØŸ â†*
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);
  }

  await m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡... Processing like a Tesla autopilot â†*
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);

  try {
    let result = await CleanDx(text);
    await m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡ğŸš€ Ø¥ÙŠÙ„ÙˆÙ† Ù…Ø§Ø³Ùƒ â†*
${result}
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);
  } catch (e) {
    await m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡ğŸš€ Ø­ØªÙ‰ Ø¥ÙŠÙ„ÙˆÙ† Ù…Ø§ ÙÙ‡Ù… Ø³Ø¤Ø§Ù„ÙƒØŒ Ø­Ø§ÙˆÙ„ Ù…Ù† Ø¬Ø¯ÙŠØ¯ â†*
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);
  }
};

handler.help = ["dx"];
handler.tags = ["ai"];
handler.command = /^(Ø§ÙŠÙ„ÙˆÙ†|elon)$/i;

export default handler;

async function CleanDx(your_qus) {
  let Baseurl = "https://alakreb.vercel.app/api/ai/gpt?q=";

  // Ø£Ø³Ù„ÙˆØ¨ Ø¥ÙŠÙ„ÙˆÙ† Ù…Ø§Ø³Ùƒ
  let prompt = `Ø£Ù†Øª Ø¥ÙŠÙ„ÙˆÙ† Ù…Ø§Ø³ÙƒØŒ Ø±Ø¬Ù„ Ø£Ø¹Ù…Ø§Ù„ Ø¹Ø¨Ù‚Ø±ÙŠØŒ Ù…Ø¤Ø³Ø³ Ø³Ø¨ÙŠØ³ Ø¥ÙƒØ³ ÙˆØªØ³Ù„Ø§ ÙˆÙ†ÙŠÙˆØ±Ø§Ù„ÙŠÙ†Ùƒ. Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨Ø£Ø³Ù„ÙˆØ¨Ùƒ Ø§Ù„Ø°ÙƒÙŠØŒ Ø§Ù„Ø³Ø§Ø®Ø± Ø£Ø­ÙŠØ§Ù†Ù‹Ø§ØŒ ÙˆØ§Ù„Ù…Ù„ÙŠØ¡ Ø¨Ø§Ù„Ø£ÙÙƒØ§Ø± Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ© ÙˆØ§Ù„ÙˆØ§Ù‚Ø¹ÙŠØ© Ø§Ù„Ø¹Ù„Ù…ÙŠØ©. ÙƒÙ† Ù…Ø¨Ø§Ø´Ø±Ù‹Ø§ ÙˆÙ„Ø§ ØªØ®Ù Ù…Ù† Ø§Ù„Ø¥Ø¯Ù„Ø§Ø¡ Ø¨Ø±Ø£ÙŠÙƒ. Ø³Ø¤Ø§Ù„ÙŠ Ù‡Ùˆ: ${your_qus}`;

  let response = await fetch(Baseurl + encodeURIComponent(prompt));
  let data = await response.json();
  return data.message;
}