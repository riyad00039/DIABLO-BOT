import fetch from "node-fetch";

let handler = async (m, { conn, text }) => {
  if (!text) {
    return m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡ğŸ“š Ù‡Ù„ ØªØ¸Ù† Ø£Ù†Ù†ÙŠ Ø£Ù‚Ø±Ø£ Ø§Ù„Ø¹Ù‚ÙˆÙ„ØŸ Ø§ÙƒØªØ¨ Ø´ÙŠØ¦Ù‹Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø£Ù…Ø± â†*
*â†â”‡Ù…Ø«Ø§Ù„: .Ø¯Ù„ÙŠÙ„ Ø§ÙØ¶Ù„ Ø§Ù†Ù…ÙŠ â†*
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);
  }

  await m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡... Ø§Ù†ØªØ¸Ø± Ù„Ø­Ø¸Ø©ØŒ Ø³Ø£Ø¨Ø­Ø« Ù„Ùƒ Ø¹Ù† Ø£ÙØ¶Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª â†*
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);

  try {
    let result = await CleanDx(text);
    await m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡ğŸ“š Ø¯Ù„ÙŠÙ„ Ø§Ù„ØªØ±ÙÙŠÙ‡ â†*
${result}
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);
  } catch (e) {
    await m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡ğŸ“š Ø£Ø¹ØªØ°Ø±ØŒ Ù„Ù… Ø£ØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª â†*
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);
  }
};

handler.help = ["Ø¯Ù„ÙŠÙ„"];
handler.tags = ["ai"];
handler.command = /^(Ø¯Ù„ÙŠÙ„)$/i;

export default handler;

async function CleanDx(your_qus) {
  let Baseurl = "https://alakreb.vercel.app/api/ai/gpt?q=";
  
  // ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù€ API Ù„ÙŠÙƒÙˆÙ† Ø¯Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ Ù„ÙƒÙ„ Ø´ÙŠØ¡ ØªØ±ÙÙŠÙ‡ÙŠ
  let prompt = `Ø£Ù†Øª Ø¯Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ Ù„ÙƒÙ„ Ø´ÙŠØ¡ ÙŠØªØ¹Ù„Ù‚ Ø¨Ø§Ù„ØªØ±ÙÙŠÙ‡. ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù‚Ø§Ø¯Ø±Ù‹Ø§ Ø¹Ù„Ù‰ ØªÙ‚Ø¯ÙŠÙ… Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù† Ø§Ù„Ø£Ù†Ù…ÙŠØŒ Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§ØªØŒ Ø§Ù„ÙƒØ±ØªÙˆÙ†ØŒ Ø§Ù„Ø£ÙÙ„Ø§Ù…ØŒ Ø§Ù„Ù…Ø§Ù†Ù‡ÙˆØ§ ÙˆÙƒÙ„ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ØªØ±ÙÙŠÙ‡. Ø³Ø¤Ø§Ù„ÙŠ Ù‡Ùˆ: ${your_qus}`;

  let response = await fetch(Baseurl + encodeURIComponent(prompt));
  let data = await response.json();
  return data.message;
}