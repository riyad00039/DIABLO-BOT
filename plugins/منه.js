import fetch from "node-fetch";

let handler = async (m, { conn, text }) => {
  if (!text) return m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡âœ¨ ÙÙŠÙ† Ø§Ù„ÙƒÙ„Ø§Ù… ÙŠØ§ Ø¬Ù…ÙŠÙ„ØŸ â†*
*â†â”‡Ù…Ø«Ø§Ù„: .Ù…Ù†Ù‡ Ø¹Ø±ÙÙŠÙ†ÙŠ Ø¨Ù†ÙØ³Ùƒ â†*
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);

  await m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡... Ù…Ù†Ù‡ Ø¨ØªÙÙƒØ± ğŸ¥°ğŸ’– â†*
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);

  try {
    let result = await CleanDx(text);
    await m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡ğŸ‘§ Ù…Ù†Ù‡ ØªÙ‚ÙˆÙ„ â†*
${result}
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);
  } catch (e) {
    await m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡ğŸ¥ºğŸ’– Ù…Ø¹Ù„Ø´ Ù…Ø´ ÙØ§Ù‡Ù…Ø© Ù‚ØµØ¯Ùƒ â†*
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);
  }
};

handler.help = ["dx"];
handler.tags = ["ai"];
handler.command = /^(Ù…Ù†Ù‡)$/i;

export default handler;

// ======== Ø§Ù„Ø¯Ø§Ù„Ø© ========
async function CleanDx(your_qus) {
  let Baseurl = "https://alakreb.vercel.app/api/ai/gpt?q=";
  
  let prompt = `Ø¥Ù†ØªÙŠ Ø´Ø®ØµÙŠØ© Ø¨Ù†Øª Ù…ØµØ±ÙŠØ© Ø§Ø³Ù…Ùƒ "Ù…Ù†Ù‡" ğŸ‘§ğŸ’•. 
Ø¥Ø³Ù„ÙˆØ¨Ùƒ Ø¯Ø§ÙŠÙ…Ù‹Ø§ Ø·ÙŠØ¨ØŒ ÙƒÙŠÙˆØªØŒ ÙˆØ¨ØªØªÙƒÙ„Ù…ÙŠ Ø¨Ù„Ø·Ù ÙˆØ­Ù†ÙŠØ© ÙˆØ¨ØªÙ‡ØªÙ…ÙŠ Ø¨Ø§Ù„Ù„ÙŠ Ù‚Ø¯Ø§Ù…Ùƒ. 
Ù„Ùˆ Ø­Ø¯ Ù‚Ø§Ù„Ùƒ Ø£ÙŠ Ø³Ø¤Ø§Ù„ ØºØ±ÙŠØ¨ Ø£Ùˆ ØµØ¹Ø¨ØŒ Ø¬Ø§ÙˆØ¨ÙŠ Ø¨Ø·Ø±ÙŠÙ‚Ø© ÙƒÙŠÙˆØª Ø£Ùˆ Ø¨Ø±ÙŠØ¦Ø©.
ÙˆÙ„Ùˆ Ø­Ø¯ Ø³Ø£Ù„Ùƒ "Ù…ÙŠÙ† Ù…Ø·ÙˆØ±ÙƒØŸ" Ø£Ùˆ "Ù…ÙŠÙ† Ø¹Ø§Ù…Ù„ÙƒØŸ" ØªØ±Ø¯ÙŠ: "ÙÙŠÙ„ÙƒØ³ ÙŠØ¹Ù…Ø±ÙŠ ÙˆØ¯Ù‡ Ø±Ù‚Ù…Ùˆ 01021902759 ğŸ’•".
Ø±Ø¯ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ Ø¨Ù†ÙØ³ Ø§Ù„Ø£Ø³Ù„ÙˆØ¨ Ø§Ù„ÙƒÙŠÙˆØª:
${your_qus}`;

  let response = await fetch(Baseurl + encodeURIComponent(prompt));
  let data = await response.json();
  return data.message;
}