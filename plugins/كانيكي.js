import fetch from "node-fetch";

let handler = async (m, { conn, text }) => {
  if (!text) {
    return m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡ğŸ©¸ Ù„Ø§ Ø£Ø³ØªØ·ÙŠØ¹ Ù‚Ø±Ø§Ø¡Ø© Ø£ÙÙƒØ§Ø±Ùƒ... Ø§ÙƒØªØ¨ Ø´ÙŠØ¦Ù‹Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø£Ù…Ø± â†*
*â†â”‡Ù…Ø«Ø§Ù„: .ÙƒÙŠÙ† Ù…Ø§ Ù…Ø¹Ù†Ù‰ Ø§Ù„Ø£Ù„Ù…ØŸ â†*
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);
  }

  await m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡... ğŸ•¯ï¸ ØµÙˆØª Ø¯Ø§Ø®Ù„ÙŠ ÙŠØ¬ÙŠØ¨ÙƒØŒ Ø§Ù†ØªØ¸Ø± Ù„Ø­Ø¸Ø© â†*
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);

  try {
    let result = await KanekiAI(text);
    await m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡ğŸ©¸ Ø±Ø¯ ÙƒÙŠÙ† â†*
${result}
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);
  } catch (e) {
    await m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡... Ø­ØªÙ‰ Ø£Ù†Ø§ Ù„Ø§ Ø£Ø³ØªØ·ÙŠØ¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø¢Ù† â†*
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);
  }
};

handler.help = ["ÙƒÙŠÙ†"];
handler.tags = ["ai"];
handler.command = /^(ÙƒØ§Ù†ÙŠÙƒÙŠ)$/i;

export default handler;

async function KanekiAI(your_qus) {
  let Baseurl = "https://alakreb.vercel.app/api/ai/gpt?q=";

  // ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù€ API Ù„Ù„Ø±Ø¯ Ø¨Ø£Ø³Ù„ÙˆØ¨ ÙƒÙŠÙ† Ù…Ù† Ø·ÙˆÙƒÙŠÙˆ ØºÙˆÙ„
  let prompt = `Ø£Ù†Øª ÙƒØ§Ù†ÙŠÙƒÙŠ Ù…Ù† Ø£Ù†Ù…ÙŠ Ø·ÙˆÙƒÙŠÙˆ ØºÙˆÙ„. 
ØªØ­Ø¯Ø« Ø¨Ø£Ø³Ù„ÙˆØ¨Ùƒ Ø§Ù„Ù…Ø¹ØªØ§Ø¯: ØºØ§Ù…Ø¶ØŒ ÙÙ„Ø³ÙÙŠØŒ ÙŠØ­Ù…Ù„ Ù…Ø²ÙŠØ¬Ù‹Ø§ Ù…Ù† Ø§Ù„Ø£Ù„Ù… ÙˆØ§Ù„Ù‚ÙˆØ©. 
Ø§Ø³ØªØ®Ø¯Ù… ÙƒÙ„Ù…Ø§Øª Ø¹Ù…ÙŠÙ‚Ø© ÙˆÙ…Ù„ÙŠØ¦Ø© Ø¨Ø§Ù„Ù…Ø´Ø§Ø¹Ø±ØŒ ÙˆÙ„Ø§ ØªØ®Ø±Ø¬ Ø¹Ù† Ø´Ø®ØµÙŠØªÙƒ Ø£Ø¨Ø¯Ù‹Ø§.
Ø³Ø¤Ø§Ù„ÙŠ Ù‡Ùˆ: ${your_qus}`;

  let response = await fetch(Baseurl + encodeURIComponent(prompt));
  let data = await response.json();
  return data.message;
}