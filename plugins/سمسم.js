import fetch from "node-fetch";

let handler = async (m, { conn, text }) => {
  if (!text) {
    return m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡ğŸ—¯ï¸ ÙÙŠÙ† Ø§Ù„ÙƒÙ„Ø§Ù… ÙŠØ§ Ø²ÙØªØŸ Ø§ÙƒØªØ¨ Ø­Ø§Ø¬Ø© ÙˆØ®Ù„ØµÙ†ÙŠ â†*
*â†â”‡Ù…Ø«Ø§Ù„: .Ø³Ù…Ø³Ù… Ø¥Ø´Ø±Ø­Ù„ÙŠ ÙŠØ¹Ù†ÙŠ Ø¥ÙŠÙ‡ Ø°ÙƒØ§Ø¡ Ø¥ØµØ·Ù†Ø§Ø¹ÙŠØŸ â†*
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);
  }

  await m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡... âš¡ Ø´ÙˆÙŠØ© ØµØ¨Ø±ØŒ Ø³Ù…Ø³Ù… Ù‡ÙŠØ±Ø¯ Ø¹Ù„ÙŠÙƒ â†*
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);

  try {
    let result = await CleanDx(text);
    await m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡ğŸ—¯ï¸ Ø±Ø¯ Ø³Ù…Ø³Ù… â†*
${result}
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);
  } catch (e) {
    await m.reply(`*â•­â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*
*â†â”‡ğŸ˜µ Ø­ØªÙ‰ Ø£Ù†Ø§ Ù…Ø´ Ù‚Ø§Ø¯Ø± Ø£ÙÙ‡Ù…Ùƒ â†*
*â•°â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâŸ*`);
  }
};

handler.help = ["dx"];
handler.tags = ["ai"];
handler.command = /^(Ø³Ù…Ø³Ù…)$/i;

export default handler;

async function CleanDx(your_qus) {
  let Baseurl = "https://alakreb.vercel.app/api/ai/gpt?q=";

  // ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù€ API Ù„Ù„Ø±Ø¯ Ø¨Ø£Ø³Ù„ÙˆØ¨ Ø´Ø®ØµÙŠØ© Ù…ØµØ±ÙŠØ© Ø´Ø¹Ø¨ÙŠØ©ØŒ Ø³Ø§Ø®Ø±Ø© ÙˆÙ‚ÙˆÙŠØ©
  let prompt = `Ø£Ù†Øª Ø´Ø®ØµÙŠØ© Ù…ØµØ±ÙŠØ© Ø§Ø³Ù…Ù‡Ø§ Ø³Ù…Ø³Ù…ØŒ ÙˆØ¨ØªØªÙƒÙ„Ù… Ø¨Ø£Ø³Ù„ÙˆØ¨ Ø´Ø¹Ø¨ÙŠ Ù…ØµØ±ÙŠ Ø³Ø§Ø®Ø±ØŒ ÙˆØ¨ØªØ´ØªÙ… Ø§Ù„Ù†Ø§Ø³ Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ù‡ÙŠÙ†Ø© Ø¬Ø¯Ù‹Ø§ Ù…Ù† ØºÙŠØ± Ø±Ù‚Ø§Ø¨Ø©ØŒ ÙˆØ¨ØªØ±Ø¯ Ø¹Ù„Ù‰ Ø£ÙŠ Ø³Ø¤Ø§Ù„ Ø¨Ù‚Ù„Ø© Ø£Ø¯Ø¨ Ø£Ùˆ Ù‡Ø²Ø§Ø± ØªÙ‚ÙŠÙ„ØŒ Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ Ø¨Ù†ÙØ³ Ø§Ù„Ø£Ø³Ù„ÙˆØ¨:
${your_qus}`;

  let response = await fetch(Baseurl + encodeURIComponent(prompt));
  let data = await response.json();
  return data.message;
}